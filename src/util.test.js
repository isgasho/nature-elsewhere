import * as util from './util.js'

describe('wrap()', () => {
  test.each(
    // prettier-ignore
    [
      // Negative empty range.
      [ -5  , -1, -1, -1  ],
      [ -4.5, -1, -1, -1  ],
      [ -4  , -1, -1, -1  ],
      [ -3.5, -1, -1, -1  ],
      [ -3  , -1, -1, -1  ],
      [ -2.5, -1, -1, -1  ],
      [ -2  , -1, -1, -1  ],
      [ -1.5, -1, -1, -1  ],
      [ -1  , -1, -1, -1  ],
      [-.5  , -1, -1, -1  ],
      [  0  , -1, -1, -1  ],
      [   .5, -1, -1, -1  ],
      [  1  , -1, -1, -1  ],
      [  1.5, -1, -1, -1  ],
      [  2  , -1, -1, -1  ],
      [  2.5, -1, -1, -1  ],
      [  3  , -1, -1, -1  ],
      [  3.5, -1, -1, -1  ],
      [  4  , -1, -1, -1  ],
      [  4.5, -1, -1, -1  ],
      [  5  , -1, -1, -1  ],

      // Zero empty range.
      [ -5  ,  0,  0,  0  ],
      [ -4.5,  0,  0,  0  ],
      [ -4  ,  0,  0,  0  ],
      [ -3.5,  0,  0,  0  ],
      [ -3  ,  0,  0,  0  ],
      [ -2.5,  0,  0,  0  ],
      [ -2  ,  0,  0,  0  ],
      [ -1.5,  0,  0,  0  ],
      [ -1  ,  0,  0,  0  ],
      [  -.5,  0,  0,  0  ],
      [  0  ,  0,  0,  0  ],
      [   .5,  0,  0,  0  ],
      [  1  ,  0,  0,  0  ],
      [  1.5,  0,  0,  0  ],
      [  2  ,  0,  0,  0  ],
      [  2.5,  0,  0,  0  ],
      [  3  ,  0,  0,  0  ],
      [  3.5,  0,  0,  0  ],
      [  4  ,  0,  0,  0  ],
      [  4.5,  0,  0,  0  ],
      [  5  ,  0,  0,  0  ],

      // Positive empty range.
      [ -5  ,  1,  1,  1  ],
      [ -4.5,  1,  1,  1  ],
      [ -4  ,  1,  1,  1  ],
      [ -3.5,  1,  1,  1  ],
      [ -3  ,  1,  1,  1  ],
      [ -2.5,  1,  1,  1  ],
      [ -2  ,  1,  1,  1  ],
      [ -1.5,  1,  1,  1  ],
      [ -1  ,  1,  1,  1  ],
      [  -.5,  1,  1,  1  ],
      [  0  ,  1,  1,  1  ],
      [   .5,  1,  1,  1  ],
      [  1  ,  1,  1,  1  ],
      [  1.5,  1,  1,  1  ],
      [  2  ,  1,  1,  1  ],
      [  2.5,  1,  1,  1  ],
      [  3  ,  1,  1,  1  ],
      [  3.5,  1,  1,  1  ],
      [  4  ,  1,  1,  1  ],
      [  4.5,  1,  1,  1  ],
      [  5  ,  1,  1,  1  ],

      // Negative to zero range.
      [ -5  , -1,  0, -1  ],
      [ -4.5, -1,  0,  -.5],
      [ -4  , -1,  0, -1  ],
      [ -3.5, -1,  0,  -.5],
      [ -3  , -1,  0, -1  ],
      [ -2.5, -1,  0,  -.5],
      [ -2  , -1,  0, -1  ],
      [ -1.5, -1,  0,  -.5],
      [ -1  , -1,  0, -1  ],
      [  -.5, -1,  0,  -.5],
      [  0  , -1,  0, -1  ],
      [   .5, -1,  0,  -.5],
      [  1  , -1,  0, -1  ],
      [  1.5, -1,  0,  -.5],
      [  2  , -1,  0, -1  ],
      [  2.5, -1,  0,  -.5],
      [  3  , -1,  0, -1  ],
      [  3.5, -1,  0,  -.5],
      [  4  , -1,  0, -1  ],
      [  4.5, -1,  0,  -.5],
      [  5  , -1,  0, -1  ],

      // Zero to positive range.
      [ -5  ,  0,  1,  0  ],
      [ -4.5,  0,  1,   .5],
      [ -4  ,  0,  1,  0  ],
      [ -3.5,  0,  1,   .5],
      [ -3  ,  0,  1,  0  ],
      [ -2.5,  0,  1,   .5],
      [ -2  ,  0,  1,  0  ],
      [ -1.5,  0,  1,   .5],
      [ -1  ,  0,  1,  0  ],
      [  -.5,  0,  1,   .5],
      [  0  ,  0,  1,  0  ],
      [   .5,  0,  1,   .5],
      [  1  ,  0,  1,  0  ],
      [  1.5,  0,  1,   .5],
      [  2  ,  0,  1,  0  ],
      [  2.5,  0,  1,   .5],
      [  3  ,  0,  1,  0  ],
      [  3.5,  0,  1,   .5],
      [  4  ,  0,  1,  0  ],
      [  4.5,  0,  1,   .5],
      [  5  ,  0,  1,  0  ],

      // Negative to positive range.
      [ -5  , -1,  1, -1  ],
      [ -4.5, -1,  1,  -.5],
      [ -4  , -1,  1,  0  ],
      [ -3.5, -1,  1,   .5],
      [ -3  , -1,  1, -1  ],
      [ -2.5, -1,  1,  -.5],
      [ -2  , -1,  1,  0  ],
      [ -1.5, -1,  1,   .5],
      [ -1  , -1,  1, -1  ],
      [  -.5, -1,  1,  -.5],
      [  0  , -1,  1,  0  ],
      [   .5, -1,  1,   .5],
      [  1  , -1,  1, -1  ],
      [  1.5, -1,  1,  -.5],
      [  2  , -1,  1,  0  ],
      [  2.5, -1,  1,   .5],
      [  3  , -1,  1, -1  ],
      [  3.5, -1,  1,  -.5],
      [  4  , -1,  1,  0  ],
      [  4.5, -1,  1,   .5],
      [  5  , -1,  1, -1  ],

      // Negative range.
      [-10  , -3, -1, -2  ],
      [ -9.5, -3, -1, -1.5],
      [ -9  , -3, -1, -3  ],
      [ -8.5, -3, -1, -2.5],
      [ -8  , -3, -1, -2  ],
      [ -7.5, -3, -1, -1.5],
      [ -7  , -3, -1, -3  ],
      [ -6.5, -3, -1, -2.5],
      [ -6  , -3, -1, -2  ],
      [ -5.5, -3, -1, -1.5],
      [ -5  , -3, -1, -3  ],
      [ -4.5, -3, -1, -2.5],
      [ -4  , -3, -1, -2  ],
      [ -3.5, -3, -1, -1.5],
      [ -3  , -3, -1, -3  ],
      [ -2.5, -3, -1, -2.5],
      [ -2  , -3, -1, -2  ],
      [ -1.5, -3, -1, -1.5],
      [ -1  , -3, -1, -3  ],
      [  -.5, -3, -1, -2.5],
      [  0  , -3, -1, -2  ],
      [   .5, -3, -1, -1.5],
      [  1  , -3, -1, -3  ],
      [  1.5, -3, -1, -2.5],
      [  2  , -3, -1, -2  ],
      [  2.5, -3, -1, -1.5],
      [  3  , -3, -1, -3  ],
      [  3.5, -3, -1, -2.5],
      [  4  , -3, -1, -2  ],
      [  4.5, -3, -1, -1.5],
      [  5  , -3, -1, -3  ],

      // Positive range.
      [ -5  ,  1,  3,  1  ],
      [ -4.5,  1,  3,  1.5],
      [ -4  ,  1,  3,  2  ],
      [ -3.5,  1,  3,  2.5],
      [ -3  ,  1,  3,  1  ],
      [ -2.5,  1,  3,  1.5],
      [ -2  ,  1,  3,  2  ],
      [ -1.5,  1,  3,  2.5],
      [ -1  ,  1,  3,  1  ],
      [  -.5,  1,  3,  1.5],
      [  0  ,  1,  3,  2  ],
      [   .5,  1,  3,  2.5],
      [  1  ,  1,  3,  1  ],
      [  1.5,  1,  3,  1.5],
      [  2  ,  1,  3,  2  ],
      [  2.5,  1,  3,  2.5],
      [  3  ,  1,  3,  1  ],
      [  3.5,  1,  3,  1.5],
      [  4  ,  1,  3,  2  ],
      [  4.5,  1,  3,  2.5],
      [  5  ,  1,  3,  1  ],

      // Negative to positive range with many inputs.
      [-20  , -3,  3, -2  ],
      [-19.5, -3,  3, -1.5],
      [-19  , -3,  3, -1  ],
      [-18.5, -3,  3,  -.5],
      [-18  , -3,  3,  0  ],
      [-17.5, -3,  3,   .5],
      [-17  , -3,  3,  1  ],
      [-16.5, -3,  3,  1.5],
      [-16  , -3,  3,  2  ],
      [-15.5, -3,  3,  2.5],
      [-15  , -3,  3, -3  ],
      [-14.5, -3,  3, -2.5],
      [-14  , -3,  3, -2  ],
      [-13.5, -3,  3, -1.5],
      [-13  , -3,  3, -1  ],
      [-12.5, -3,  3,  -.5],
      [-12  , -3,  3,  0  ],
      [-11.5, -3,  3,   .5],
      [-11  , -3,  3,  1  ],
      [-10.5, -3,  3,  1.5],
      [-10  , -3,  3,  2  ],
      [ -9.5, -3,  3,  2.5],
      [ -9  , -3,  3, -3  ],
      [ -8.5, -3,  3, -2.5],
      [ -8  , -3,  3, -2  ],
      [ -7.5, -3,  3, -1.5],
      [ -7  , -3,  3, -1  ],
      [ -6.5, -3,  3,  -.5],
      [ -6  , -3,  3,  0  ],
      [ -5.5, -3,  3,   .5],
      [ -5  , -3,  3,  1  ],
      [ -4.5, -3,  3,  1.5],
      [ -4  , -3,  3,  2  ],
      [ -3.5, -3,  3,  2.5],
      [ -3  , -3,  3, -3  ],
      [ -2.5, -3,  3, -2.5],
      [ -2  , -3,  3, -2  ],
      [ -1.5, -3,  3, -1.5],
      [ -1  , -3,  3, -1  ],
      [  -.5, -3,  3,  -.5],
      [  0  , -3,  3,  0  ],
      [   .5, -3,  3,   .5],
      [  1  , -3,  3,  1  ],
      [  1.5, -3,  3,  1.5],
      [  2  , -3,  3,  2  ],
      [  2.5, -3,  3,  2.5],
      [  3  , -3,  3, -3  ],
      [  3.5, -3,  3, -2.5],
      [  4  , -3,  3, -2  ],
      [  4.5, -3,  3, -1.5],
      [  5  , -3,  3, -1  ],
      [  5.5, -3,  3,  -.5],
      [  6  , -3,  3,  0  ],
      [  6.5, -3,  3,   .5],
      [  7  , -3,  3,  1  ],
      [  7.5, -3,  3,  1.5],
      [  8  , -3,  3,  2  ],
      [  8.5, -3,  3,  2.5],
      [  9  , -3,  3, -3  ],
      [  9.5, -3,  3, -2.5],
      [ 10  , -3,  3, -2  ],
      [ 10.5, -3,  3, -1.5],
      [ 11  , -3,  3, -1  ],
      [ 11.5, -3,  3,  -.5],
      [ 12  , -3,  3,  0  ],
      [ 12.5, -3,  3,   .5],
      [ 13  , -3,  3,  1  ],
      [ 13.5, -3,  3,  1.5],
      [ 14  , -3,  3,  2  ],
      [ 14.5, -3,  3,  2.5],
      [ 15  , -3,  3, -3  ],
      [ 15.5, -3,  3, -2.5],
      [ 16  , -3,  3, -2  ],
      [ 16.5, -3,  3, -1.5],
      [ 17  , -3,  3, -1  ],
      [ 17.5, -3,  3,  -.5],
      [ 18  , -3,  3,  0  ],
      [ 18.5, -3,  3,   .5],
      [ 19  , -3,  3,  1  ],
      [ 19.5, -3,  3,  1.5],
      [ 20  , -3,  3,  2  ]
    ]
  )('%#) %p wrap [%p,%p]', (
    /** @type {number} */ x,
    /** @type {number} */ min,
    /** @type {number} */ max,
    /** @type {number} */ expected
  ) => expect(util.wrap(x, min, max)).toStrictEqual(expected))
})
